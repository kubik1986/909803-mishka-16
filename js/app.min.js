!function(){var e,t,n,o=window.navigator.userAgent.toLowerCase();if(/trident/gi.test(o)||/msie/gi.test(o)){var a=document.querySelectorAll(".js-fix-ie");for(var r=0;r<a.length;r++)element=a[r],element.parentNode.replaceChild((e=element,t=void 0,t=document.createElement("div"),n=e.cloneNode(!0),t.appendChild(n),t.style.display="flex",t),element)}}(),function(){var t=document.querySelector(".modal-overlay");if(t){function n(e){e.keyCode===v&&(e.preventDefault(),y())}function o(e){e.target===t&&(e.preventDefault(),y())}function a(e){e.preventDefault(),r=e.currentTarget,f()}var r,d=document.querySelector("body"),i=t.querySelector(".basket-add"),s=i.querySelector(".basket-add-form"),e=document.querySelectorAll(".product-full__buy-btn, .product__buy-btn"),c=i.querySelector(".basket-add__close-btn"),l=s.querySelector("input"),u=s.querySelectorAll("input"),m=9,v=27,f=function(e){s.classList.contains("basket-add-form--error")&&s.classList.remove("basket-add-form--error"),t.classList.add("modal-overlay--show"),d.classList.add("modal-opened"),l.focus(),document.addEventListener("keydown",n),document.addEventListener("click",o)},y=function(){d.classList.remove("modal-opened"),t.classList.remove("modal-overlay--show"),r.focus(),document.removeEventListener("keydown",n),document.removeEventListener("click",o)};e.forEach(function(e){e.addEventListener("click",a)}),c.addEventListener("click",y),c.addEventListener("keydown",function(e){e.keyCode!==m||e.shiftKey||(e.preventDefault(),l.focus())}),l.addEventListener("keydown",function(e){e.keyCode===m&&e.shiftKey&&(e.preventDefault(),c.focus())}),s.addEventListener("submit",function(e){s.classList.remove("basket-add-form--error");for(var t=!0,n=0;n<u.length;n++)if(u[n].checked)return void(t=!1);t&&(e.preventDefault(),i.offsetWidth=i.offsetWidth,s.classList.add("basket-add-form--error"))})}}(),function(){var e=document.getElementById("map");if(e){var t=457,n=document.documentElement.clientHeight,o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);o&&n<t+80&&(t=n-80+"px",e.style.height=t),ymaps.ready(function(){var e=new ymaps.Map("map",{center:[59.93878,30.323055],zoom:17,controls:["zoomControl","fullscreenControl"]},{suppressMapOpenBlock:!0});e.behaviors.disable(["scrollZoom"]),o&&e.behaviors.disable("drag");var t=new ymaps.Placemark([59.938631,30.323055],{},{iconLayout:"default#image",iconImageHref:"img/map-pin.svg",iconImageSize:[66,100],iconImageOffset:[-25,-110]});e.geoObjects.add(t)})}}(),function(){var e=document.querySelector(".main-nav"),t=e.querySelector(".main-nav__toggle"),n=t.children[0];e.classList.add("main-nav--closed"),t.addEventListener("click",function(){e.classList.contains("main-nav--closed")?(e.classList.remove("main-nav--closed"),e.classList.add("main-nav--opened"),n.textContent="Закрыть меню"):(e.classList.remove("main-nav--opened"),e.classList.add("main-nav--closed"),n.textContent="Открыть меню")})}();