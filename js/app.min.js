var ua=window.navigator.userAgent.toLowerCase(),isIE=/trident/gi.test(ua)||/msie/gi.test(ua);if(isIE){var elements=document.querySelectorAll(".js-fix-ie");function divWrapper(e){var n=document.createElement("div"),t=e.cloneNode(!0);return n.appendChild(t),n.style.display="flex",n}for(var i=0;i<elements.length;i++)element=elements[i],element.parentNode.replaceChild(divWrapper(element),element)}var modalOverlay=document.querySelector(".modal-overlay");if(modalOverlay){var popupOpenBtnCurrent,popup=modalOverlay.querySelector(".basket-add"),popupForm=popup.querySelector(".basket-add-form"),popupOpenBtns=document.querySelectorAll(".product-full__buy-btn, .product__buy-btn"),popupCloseBtn=popup.querySelector(".basket-add__close-btn"),popupFirstInput=popupForm.querySelector("input"),popupInputs=popupForm.querySelectorAll("input"),keys={Tab:9,Esc:27},addOpenBtnHandler=function(n){n.addEventListener("click",function(e){e.preventDefault(),popupOpenBtnCurrent=n,popupForm.classList.remove("basket-add-form--error"),modalOverlay.classList.add("modal-overlay--show"),popupFirstInput.focus(),window.addEventListener("keydown",function(e){e.keyCode===keys.Esc&&(e.preventDefault(),modalOverlay.classList.remove("modal-overlay--show"),popupOpenBtnCurrent.focus())}),window.addEventListener("click",function(e){e.target===modalOverlay&&(e.preventDefault(),modalOverlay.classList.remove("modal-overlay--show"),popupOpenBtnCurrent.focus())})})};for(i=0;i<popupOpenBtns.length;i++)addOpenBtnHandler(popupOpenBtns[i]);popupCloseBtn.addEventListener("click",function(e){e.preventDefault(),modalOverlay.classList.remove("modal-overlay--show"),popupOpenBtnCurrent.focus()}),popupCloseBtn.addEventListener("keydown",function(e){e.keyCode!==keys.Tab||e.shiftKey||(e.preventDefault(),popupFirstInput.focus())}),popupFirstInput.addEventListener("keydown",function(e){e.keyCode===keys.Tab&&e.shiftKey&&(e.preventDefault(),popupCloseBtn.focus())}),popupForm.addEventListener("submit",function(e){popupForm.classList.remove("basket-add-form--error");for(var n=!0,t=0;t<popupInputs.length;t++)if(popupInputs[t].checked)return void(n=!1);n&&(e.preventDefault(),popup.offsetWidth=popup.offsetWidth,popupForm.classList.add("basket-add-form--error"))})}var map=document.getElementById("map");if(map){var mapHeightMobile=457,minPadding=40,clientHeight=document.documentElement.clientHeight,isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);function init(){var e=new ymaps.Map("map",{center:[59.93878,30.323055],zoom:17,controls:["zoomControl","fullscreenControl"]},{suppressMapOpenBlock:!0});e.behaviors.disable(["scrollZoom"]),isMobile&&e.behaviors.disable("drag");var n=new ymaps.Placemark([59.938631,30.323055],{},{iconLayout:"default#image",iconImageHref:"img/map-pin.svg",iconImageSize:[66,100],iconImageOffset:[-25,-110]});e.geoObjects.add(n)}isMobile&&clientHeight<mapHeightMobile+2*minPadding&&(mapHeightMobile=clientHeight-2*minPadding+"px",map.style.height=mapHeightMobile),ymaps.ready(init)}var navMain=document.querySelector(".main-nav"),navToggle=navMain.querySelector(".main-nav__toggle"),navToggleText=navToggle.children[0];navMain.classList.add("main-nav--closed"),navToggle.addEventListener("click",function(){navMain.classList.contains("main-nav--closed")?(navMain.classList.remove("main-nav--closed"),navMain.classList.add("main-nav--opened"),navToggleText.textContent="Закрыть меню"):(navMain.classList.remove("main-nav--opened"),navMain.classList.add("main-nav--closed"),navToggleText.textContent="Открыть меню")});